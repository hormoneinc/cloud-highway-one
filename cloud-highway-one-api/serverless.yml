service: cloud-highway-one-api

provider:
  name: aws
  region: us-west-2
  runtime: nodejs12.x
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:Query
        - dynamodb:Scan
        - dynamodb:GetItem
        - dynamodb:BatchGetItem
      Resource: 'arn:aws:dynamodb:us-west-2:*:table/CloudHighwayOne'
    - Effect: Allow
      Action:
        - dynamodb:Query
        - dynamodb:Scan
        - dynamodb:GetItem
        - dynamodb:PutItem
        - dynamodb:BatchGetItem
      Resource: 'arn:aws:dynamodb:us-west-2:*:table/CloudHighwayOneCache'

functions:
  GetInterRegionalLatency:
    handler: api/getLatency.interRegionalLatency
    timeout: 10
    events:
      - http:
          path: getLatency
          method: get
          statusCodes:
            200:
              pattern: ''
            400:
              pattern: '.*"statusCode":400,.*'
            500:
              pattern: '.*"statusCode":500,.*'
  GetBestDstRegionFromSrcRegion:
    handler: api/getBestDstRegion.getBestDestinationRegionFromSourceRegion
    timeout: 10
    events:
      - http:
          path: getBestDstRegion
          method: get
          statusCodes:
            200:
              pattern: ''
            400:
              pattern: '.*"statusCode":400,.*'
            500:
              pattern: '.*"statusCode":500,.*'
  GetAllDstRegionFromSrcRegion:
    handler: api/getAllDstRegion.getAllInterRegionalLatenciesFromSourceRegion
    timeout: 10
    events:
      - http:
          path: getAllDstRegion
          method: get
          statusCodes:
            200:
              pattern: ''
            400:
              pattern: '.*"statusCode":400,.*'
            500:
              pattern: '.*"statusCode":500,.*'
  GetAllData:
    handler: api/getAllData.getAllData
    timeout: 15
    events:
      - http:
          path: getAllData
          method: get
          statusCodes:
            200:
              pattern: ''
            400:
              pattern: '.*"statusCode":400,.*'
            500:
              pattern: '.*"statusCode":500,.*'
